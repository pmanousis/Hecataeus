CREATE TABLE STAGE_PROVCOMMPROD_STAGE
(
  PROVCOMMPROD_SK       NUMBER(5)               NOT NULL,
  PROVCOMMPROD_CODE     VARCHAR2(20 BYTE)       NOT NULL,
  PROVCOMMPROD_DESCR    VARCHAR2(100 BYTE),
  PROVCOMMPROD_CHANNEL  NUMBER(5),
  PROVCOMMPROD_ORDER    NUMBER(10),
  COMMPRODGROUP_CODE    VARCHAR2(20 BYTE)       NOT NULL,
  COMMPRODGROUP_DESCR   VARCHAR2(100 BYTE),
  PROVCOMMPROD_UPDFLAG  VARCHAR2(1 BYTE)        NOT NULL
)
TABLESPACE STAGE_STAGE_TBL
PCTUSED    0
PCTFREE    10
INITRANS   1
MAXTRANS   255
STORAGE    (
            INITIAL          160K
            MINEXTENTS       1
            MAXEXTENTS       2147483645
            PCTINCREASE      0
            BUFFER_POOL      DEFAULT
           )
NOLOGGING 
NOCOMPRESS 
NOCACHE
NOPARALLEL
MONITORING;


CREATE UNIQUE INDEX STAGE_PROVCOMMPROD_CODE_UIDX ON STAGE_PROVCOMMPROD_STAGE
(PROVCOMMPROD_CODE)
NOLOGGING
TABLESPACE INDEXES
PCTFREE    10
INITRANS   2
MAXTRANS   255
STORAGE    (
            INITIAL          160K
            NEXT             1M
            MINEXTENTS       1
            MAXEXTENTS       2147483645
            PCTINCREASE      0
            BUFFER_POOL      DEFAULT
           )
NOPARALLEL;


CREATE UNIQUE INDEX STAGE_PROVCOMMPROD_STAGE_PIDX ON STAGE_PROVCOMMPROD_STAGE
(PROVCOMMPROD_SK)
NOLOGGING
TABLESPACE INDEXES
PCTFREE    10
INITRANS   2
MAXTRANS   255
STORAGE    (
            INITIAL          160K
            NEXT             1M
            MINEXTENTS       1
            MAXEXTENTS       2147483645
            PCTINCREASE      0
            BUFFER_POOL      DEFAULT
           )
NOPARALLEL;


CREATE OR REPLACE TRIGGER STAGE_PROVCOMMPROD_ST_BIR_TRI BEFORE INSERT ON STAGE_PROVCOMMPROD_STAGE
FOR EACH ROW
DECLARE
	   tmpVar NUMBER;
/******************************************************************************
   COMPANY: ORACLE
   PROJECT: MIS
   NAME:	STAGE_PROVCOMMPROD_STAGE_BIR_TRI
   PURPOSE: Default values for several columns of the table
   NOTES:

   REVISIONS:
   Ver        Date        Author           Description
   ---------  ----------  ---------------  ------------------------------------
   1.0        15/1/2007   GPAPOUTS         1. Created this trigger.
******************************************************************************/
BEGIN
	 IF :NEW.PROVCOMMPROD_SK IS NULL THEN
           SELECT STAGE_PROVCOMMPROD_STAGE_SEQ.NEXTVAL INTO tmpVar FROM dual;
          :NEW.PROVCOMMPROD_SK := tmpVar;
     END IF;
EXCEPTION
		 WHEN OTHERS THEN
-- Consider logging the error and then re-raise
   			RAISE;
END  STAGE_PROVCOMMPROD_ST_BIR_TRI;
/
SHOW ERRORS;



CREATE PUBLIC SYNONYM STAGE_PROVCOMMPROD_STAGE FOR STAGE_PROVCOMMPROD_STAGE;


ALTER TABLE STAGE_PROVCOMMPROD_STAGE ADD (
  CONSTRAINT STAGE_PROVCOMMPROD_STAGE_PK
 PRIMARY KEY
 (PROVCOMMPROD_SK));

ALTER TABLE STAGE_PROVCOMMPROD_STAGE ADD (
  CONSTRAINT STAGE_PROVCOMMPROD_ST_CODE_UK
 UNIQUE (PROVCOMMPROD_CODE));


GRANT ALTER, DELETE, INDEX, INSERT, REFERENCES, SELECT, UPDATE, ON COMMIT REFRESH, QUERY REWRITE, DEBUG, FLASHBACK ON  STAGE_PROVCOMMPROD_STAGE TO DWSRC;

GRANT ALTER, DELETE, INDEX, INSERT, REFERENCES, SELECT, UPDATE, ON COMMIT REFRESH, QUERY REWRITE, DEBUG, FLASHBACK ON  STAGE_PROVCOMMPROD_STAGE TO MIS WITH GRANT OPTION;